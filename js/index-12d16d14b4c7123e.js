(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332,446],{24151:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ep});var r,o=t(73556),i=t(96540),s=t(59622),a=t(70852),l=t(71468),c=t(59466),d=t(4736),u=t(13368),p=t.n(u),f=t(86715),h=t(45510),v=t(94228),x=t(57500),m=t(19636);let g=function(e){var n=(0,l.wA)(),t=(0,l.d4)(x.wA);return(0,i.useEffect)(function(){!e||t.details||t.isFetching||n((0,m.b_)({activationKey:e}))},[e]),t},y=function(e){var n=(0,l.wA)(),t=(0,l.d4)(x.qv);return(0,i.useEffect)(function(){!e||t.details||t.isFetching||n((0,m.XQ)({residentId:e}))},[e]),t};var S=t(8056),b=t(81216),j=t(40460),A=t(5820),w=t(54756),C=t.n(w),O=t(92744),k=t(25446),N=t(64838),I=function(e){var n;return{form:{display:"flex",justifyContent:"center",marginTop:"-70px"},root:(n={padding:"10px",margin:"24px 0 7px 0",width:"100%",maxWidth:"410px",borderRadius:"15px",border:"none",textAlign:"center",boxShadow:"0 0 20px rgba(0, 0, 0, 0.05)","& .MuiFormControl-marginNormal":{marginTop:"8px"},"& .MuiFormHelperText-contained":{lineHeight:N.rE}},(0,o.A)(n,e.breakpoints.up("md"),{marginRight:"20px",padding:"0.5px 30px 10px 30px"}),(0,o.A)(n,e.breakpoints.down("sm"),{marginTop:"40px"}),n),title:{fontSize:"28px",fontWeight:700,fontFamily:e.typography.h2.fontFamily,marginBottom:"0",marginTop:"28px",lineHeight:"34px"},titleExpired:{fontSize:"28px",fontFamily:e.typography.h2.fontFamily,marginBottom:"22px",marginTop:"28px",lineHeight:"34px",color:N._q},desc:{fontSize:"16px",lineHeight:"22px",margin:"12px 0 18px 0"},secondaryDesc:{fontSize:"16px",fontWeight:500,lineHeight:"30px",margin:"20px 0 14px 0"},disclaimerLinks:{minWidth:"auto",background:"none !important",verticalAlign:"baseline",fontSize:"14px",padding:"0",lineHeight:"18px",color:e.palette.primary.main,textTransform:"none",textDecoration:"underline","&:hover":{textDecoration:"none"}},notchedOutline:{borderColor:N.Mx},validInput:{"& .MuiOutlinedInput-notchedOutline, & .MuiSelect-outlined":{borderColor:"".concat(e.palette.secondary.main," !important")}},errorCard:{border:N.wm,backgroundColor:N.G$,borderRadius:"8px",margin:"24px 0",padding:"24px",color:N.Qt},wrapContainer:{maxWidth:"400px",width:"100%",margin:"0 auto",paddingBottom:"24px",textAlign:"center"},wrapContainerForCheck:{textAlign:"center",paddingBottom:"24px"},button:{color:"#FFF",height:"60px",fontWeight:"bold",fontSize:"20px",letterSpacing:"2px",backgroundColor:e.palette.primary.main},cancelButton:{height:"60px",fontSize:"20px",fontWeight:"bold",background:"none",margin:"20px 0",letterSpacing:"2px",color:e.palette.primary.main,border:"4px solid transparent",borderColor:e.palette.primary.main},idiqIcon:(0,o.A)({height:"47px",marginTop:"30px"},e.breakpoints.down("sm"),{display:"none"}),termsLinks:{display:"flex",justifyContent:"center",marginBottom:"20px"},secondaryLink:{fontWeight:"bold",fontSize:"16px",padding:"0",verticalAlign:"baseline",borderRadius:"0",textTransform:"none",textDecoration:"underline",lineHeight:"22px",background:"none !important",color:e.palette.primary.main,border:0,"&:hover":{textDecoration:"none",color:e.palette.primary.main}},submitButtonWrap:(0,o.A)({marginTop:"4px"},e.breakpoints.down("sm"),{marginTop:"24px"}),separator:{fontSize:"16px",margin:"0 4px"},timerText:{fontWeight:"bold",margin:"-5px 0 40px 0"}}},T=t(30861),F=t(98099),P=T.Ik({phone:F.BH.required(S.vJ.Required),lastFourSSN:F.vW.required(S.vJ.Required)}),E={lastFourSSN:"",phone:""},q=t(14713),B=t(25487),D=t(21696),W=t(83097),_=t(42640),z=t(12233),L=t(1735),G=t(10159),R=t(14953),H=t.n(R),M=t(64037),J=t(16368),$=t(59611),V=t(41801),K=t(15396),X=t(25990),Q=t(45106),U=t(74848),Y=H()(function(){return t.e(716).then(t.bind(t,56716))},{loadableGenerated:{webpack:function(){return[56716]}}}),Z=H()(function(){return t.e(905).then(t.bind(t,9905))},{loadableGenerated:{webpack:function(){return[9905]}}}),ee=(0,b.uR)(),en="",et="",er=!1,eo=function(e){var n=e%60;return~~(e/60)+":"+(n<10?"0"+n:n)},ei=300;let es=function(){var e,n,t,o,s,a=I((0,J.A)()),d=(0,i.useState)(!1),u=d[0],p=d[1],h=(0,i.useState)(!1),v=h[0],g=h[1],y=(0,i.useState)(!1),b=y[0],w=y[1],N=(0,i.useState)(!1),T=N[0],F=N[1],R=(0,i.useState)(eo(ei)),H=R[0],es=R[1],ea=(0,i.useState)(""),el=ea[0],ec=ea[1],ed=(0,i.useState)(!1),eu=ed[0],ep=ed[1],ef=(0,f.useRouter)(),eh=(0,c.A)(),ev=(0,l.wA)(),ex=(0,l.d4)(x.$0),em=(0,l.d4)(x.iR);L.rG.setCustomContext({userAction:"ProveWorkflow"}),(0,i.useEffect)(function(){var e;null==ef||null===(e=ef.query)||void 0===e||!e.key||em.isFetching||em.details||ev((0,m.R5)({key:ef.query.key}))},[eh,em]);var eg=(null==ex||null===(e=ex.details)||void 0===e?void 0:e.isPromptForDiscountCode)&&(!em.hasKey||em.details&&!(null!==(n=em.details)&&void 0!==n&&n.couponCode)),ey=function(){clearInterval(r),ev((0,W.KV)(null)),ev((0,W.t$)({proveSessionId:ee,isSaveOnly:!0})),ef.push({pathname:S.BV.Enroll})},eS=function(){if((ei=ei<=0?300:ei)<300){es(eo(ei=300));return}es(eo(ei));var e=setInterval(function(){--ei<=0&&clearInterval(e),es(eo(ei))},1e3)},eb=function(e,n){var t,r,o={sessionId:ee,phoneNumber:en||(null==n||null===(t=n.phone)||void 0===t?void 0:t.replace(/\D/g,"")),last4SSN:et||(null==n||null===(r=n.lastFourSSN)||void 0===r?void 0:r.replace(/\D/g,"")),activity:e};fetch(S.zO+"/v1/add-activity",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(o)}).catch(function(e){ec(e),L.rG.captureError(e)})},ej=(o=(0,A.A)(C().mark(function e(){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={phoneNumber:en,last4SSN:et,sessionId:ee},fetch(S.zO+"/v1/pre-fill",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(n)}).then(function(){var e=(0,A.A)(C().mark(function e(n){var t,r,o,i,s,a,l,c;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:0===(t=e.sent).status?(ev((0,W._6)({firstName:t.firstName,lastName:t.lastName,currentStreet:t.addresses&&(null===(r=t.addresses[0])||void 0===r?void 0:r.address),currentCity:t.addresses&&(null===(o=t.addresses[0])||void 0===o?void 0:o.city),currentState:t.addresses&&(null===(i=t.addresses[0])||void 0===i?void 0:i.region),currentZip:t.addresses&&(null===(s=t.addresses[0])||void 0===s?void 0:s.postalCode),trustedFormCertId:(null===(a=window.trustedForm)||void 0===a?void 0:a.id)||"",isValid:!0})),c="".concat(t.dob.split("-")[1],"/").concat(t.dob.split("-")[2],"/").concat(t.dob.split("-")[0]),null===(l=sessionStorage)||void 0===l||l.setItem(S.c9.ProvePrefill,JSON.stringify({firstName:t.firstName,lastName:t.lastName,dateOfBirth:c})),ev((0,W.t$)({ssn:t.ssn,phone:en,dateOfBirth:c,isProvePrefill:!0,proveSessionId:ee})),ef.push({pathname:S.BV.Identity,query:ef.query})):(L.rG.captureError(null==n?void 0:n.additionalInfo),ey());case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){ey(),L.rG.captureError(e)});case 2:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),eA=(s=(0,A.A)(C().mark(function e(){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(!1),F(!0),n={phoneNumber:en,last4SSN:et,sessionId:ee},fetch(S.zO+"/v1/trust-score",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(n)}).then(function(){var e=(0,A.A)(C().mark(function e(n){var t,r,o,i,s,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:0===(t=e.sent).status?(null!==(r=ex.details)&&void 0!==r&&r.provePrefillEnabled&&(null==t?void 0:t.trustScore)>=Number(null===(o=ex.details)||void 0===o?void 0:o.proveTrustScoreMax)?ej():(eb("TrustScoreNotMet"),ey()),ev((0,W.t$)({isProveBypass:(null===(i=ex.details)||void 0===i?void 0:i.proveTrustScoreEnabled)&&Number(null===(s=ex.details)||void 0===s?void 0:s.proveByPassAuthTrustScore)>0&&(null==t?void 0:t.trustScore)>=Number(null===(a=ex.details)||void 0===a?void 0:a.proveByPassAuthTrustScore),trustScore:null==t?void 0:t.trustScore,isSaveOnly:!0}))):(L.rG.captureError(null==t?void 0:t.additionalInfo),ey());case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){L.rG.captureError(e),ey()});case 4:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)}),ew=function(){g(!0),eS(),eu||(ep(!0),r=setInterval(function(){var e;er||(er=!0,fetch("".concat(S.zO,"/v1/verify-session/").concat(ee),{method:"GET"}).then((e=(0,A.A)(C().mark(function e(n){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(!(n=e.sent)){e.next=9;break}if(clearInterval(r),!G.Fr){e.next=8;break}return ef.push(S.BV.AuthSuccess),e.abrupt("return");case 8:null!==(t=ex.details)&&void 0!==t&&t.proveTrustScoreEnabled?eA():ey();case 9:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)})).finally(function(){er=!1}).catch(function(e){clearInterval(r),L.rG.captureError(e),ey()}))},2e3))},eC=function(e){0===e.statusCode?ew():(L.rG.captureError(null==e?void 0:e.statusText),ey()),p(!1)},eO=function(e,n){ev((0,W.t$)({proveSessionId:ee,isSaveOnly:!0}));var t,r={sessionId:ee,finalTargetUrl:window.location.origin+S.BV.AuthSuccess+"?"+eh.queryString+"&ismobile="+G.Fr+"&sessionid="+ee+"&phone="+e+"&ssn="+n,phoneNumber:e,last4SSN:n,originCallerUrl:"".concat(window.location.origin,"/continueAuth"),BrandPhoneNumber:S.T2,BrandName:S.HD};p(!0),fetch(S.zO+"/v1/sms-auth-url",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(r)}).then((t=(0,A.A)(C().mark(function t(r){var o;return C().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:0===(o=t.sent).statusCode?(en=e.replace(/\D/g,""),et=n,eC(o)):(L.rG.captureError(null==o?void 0:o.statusText),ey());case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})).catch(function(e){ec(e),L.rG.captureError(e),ey()})},ek=function(e){v&&w(!0),eO(e.phone.replace(/\D/g,""),e.lastFourSSN)},eN=(0,O.Wx)({initialValues:E,onSubmit:ek,validationSchema:P}),eI=eN.handleSubmit,eT=eN.handleChange,eF=eN.handleBlur,eP=eN.values,eE=eN.errors,eq=eN.touched,eB=eN.isValid;return((0,i.useEffect)(function(){ev((0,W.BA)(eB))},[eB]),(0,i.useEffect)(function(){var e,n,t,r,o;null!==(e=eh.queryObject)&&void 0!==e&&e.vfp&&(null===(n=eh.queryObject)||void 0===n?void 0:n.ismobile)==="true"&&(en=null===(t=eh.queryObject)||void 0===t?void 0:t.phone,et=null===(r=eh.queryObject)||void 0===r?void 0:r.ssn,ee=null===(o=eh.queryObject)||void 0===o?void 0:o.sessionid,ev((0,W.t$)({proveSessionId:ee,isSaveOnly:!0})),eA()),ev((0,W.KV)(!0))},[]),null!==(t=ex.details)&&void 0!==t&&t.trustedFormEnabled&&(0,i.useEffect)(function(){var e=document.createElement("script");e.src=S.mf+new Date().getTime()+Math.random(),e.async=!0,e.type="text/javascript",document.body.appendChild(e)},[]),T)?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.A,{children:(0,U.jsx)(z.A,{activeStep:D.N9.AccountInfo})}),(0,U.jsx)(Z,{})]}):!u||el||v?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.A,{children:(0,U.jsx)(z.A,{activeStep:D.N9.AccountInfo})}),(0,U.jsxs)("form",{onSubmit:eI,id:S.Cx,style:a.form,children:[(0,U.jsxs)($.A,{sx:a.root,variant:"outlined",children:[el&&(0,U.jsx)(q.A,{children:el}),(0,U.jsx)(V.A,{component:"img",src:"./images/csiq/logo_mobile.svg",alt:S.HD,sx:a.idiqIcon}),v?(0,U.jsxs)(V.A,{sx:a.wrapContainerForCheck,children:[ei?(0,U.jsxs)("div",{children:[(0,U.jsxs)(Q.H2,{sx:a.title,children:[b&&(0,U.jsx)("div",{children:"A new link was sent."}),"Check your phone."]}),(0,U.jsxs)(V.A,{component:"p",sx:a.desc,children:["A text message with a link was sent to the phone number ending in ".concat(en.replace(/\D/g,"").substr(en.length-4)),"."]}),(0,U.jsxs)(V.A,{component:"p",sx:a.timerText,children:["Link will expire in: ",H]})]}):(0,U.jsx)("div",{children:(0,U.jsxs)(Q.H2,{sx:a.titleExpired,children:[(0,U.jsx)("div",{children:"The link has expired."}),(0,U.jsx)("div",{children:"Please try again."})]})}),(0,U.jsx)(X.A,{sx:a.secondaryLink,onClick:function(){eb("NoSmsReceived"),ey()},children:"Manually enter my information instead"}),(0,U.jsxs)(V.A,{component:"p",sx:a.secondaryDesc,children:["If you haven't received the link after a few minutes you can"," ",(0,U.jsx)(X.A,{sx:a.secondaryLink,onClick:function(){eb("ResendLink"),ek(eP)},children:"request a new link"})]})]}):(0,U.jsxs)(V.A,{sx:a.wrapContainer,children:[(0,U.jsxs)(Q.H2,{sx:a.title,children:["Let’s begin by",(0,U.jsx)("br",{})," finding your info."]}),(0,U.jsxs)(V.A,{component:"p",style:a.desc,children:["We can pre-fill some of your info and",(0,U.jsx)("br",{})," speed up the enrollment process."]}),(0,U.jsx)(M.A,{children:(0,U.jsx)(K.A,{variant:"outlined",margin:"normal",fullWidth:!0,name:"phone",onChange:eT,onBlur:eF,value:eP.phone,label:S.gC.ProvePhone,id:"phone",autoComplete:"tel",error:eq.phone&&!!eE.phone,helperText:eq.phone&&eE.phone,sx:eq.phone&&!eE.phone?a.validInput:void 0,slotProps:{input:{endAdornment:eq.phone&&!eE.phone&&(0,U.jsx)(k.default,{}),sx:{notchedOutline:a.notchedOutline},inputMode:"numeric"}}})}),(0,U.jsx)(M.A,{children:(0,U.jsx)(K.A,{variant:"outlined",margin:"normal",name:"lastFourSSN",onChange:eT,onBlur:eF,value:eP.lastFourSSN,fullWidth:!0,label:S.gC.ProveLastFourSSN,id:"lastFourSSN","data-tf-sensitive":"true",autoComplete:"off",error:eq.lastFourSSN&&!!eE.lastFourSSN,helperText:eq.lastFourSSN&&eE.lastFourSSN,sx:eq.lastFourSSN&&!eE.lastFourSSN?a.validInput:void 0,slotProps:{input:{endAdornment:eq.lastFourSSN&&!eE.lastFourSSN&&(0,U.jsx)(k.default,{}),sx:{notchedOutline:a.notchedOutline},inputMode:"numeric"},htmlInput:{maxLength:4}}})}),(0,U.jsx)(M.A,{sx:a.submitButtonWrap,children:(0,U.jsx)(B.default,{onClick:eI,text:"Submit",hideIcon:!0,disabled:!eB||!eq.phone||u&&!el})}),(0,U.jsx)(M.A,{style:{marginTop:"24px",textAlign:"center"},children:(0,U.jsx)(X.A,{sx:a.secondaryLink,onClick:function(){eb("NoMobile",eP),ey()},children:"I don’t have a mobile phone"})})]}),(0,U.jsxs)(V.A,{sx:a.termsLinks,children:[(0,U.jsx)(X.A,{onClick:function(){return window.open(S.gu,"Terms and Conditions","resizable")},sx:a.disclaimerLinks,children:"Terms and Conditions"}),(0,U.jsx)("span",{style:a.separator,children:"|"}),(0,U.jsx)(X.A,{onClick:function(){return window.open(S.fI,"Privacy Policy","resizable")},sx:a.disclaimerLinks,children:"Privacy Policy"})]})]}),eg&&(0,U.jsx)(Y,{})]})]}):(0,U.jsx)(j.A,{status:"progress",title:"Loading...",description:"Please wait..."})};var ea=t(43705),el=t(66465),ec=t(32006);function ed(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ed(Object(t),!0).forEach(function(n){(0,o.A)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ed(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}let ep=function(){var e,n,t,r,o=(0,l.wA)(),u=(0,c.A)(),m=(0,f.useRouter)(),A=(0,l.d4)(x.MQ).isProveWorkflow,w=(0,b.JO)(u.queryObject||{}),C=(0,l.d4)(x.$0).details;y(null===(e=u.queryObject)||void 0===e?void 0:e.residentid),g(null===(n=u.queryObject)||void 0===n?void 0:n.activationkey);var O=null!==(t=u.queryObject)&&void 0!==t&&t.activationkey?{effortCode:"",planCode:"",groupingCode:""}:{effortCode:w.effortCode,planCode:w.planCode,groupingCode:w.groupingCode};(0,v.A)(O),(0,i.useEffect)(function(){if(!(null!==(e=u.queryObject)&&void 0!==e&&e.activationkey)&&null!==(n=sessionStorage)&&void 0!==n&&n.getItem(S.c9.ActivationInfo)&&o((0,ea.J)(JSON.parse(null===(s=sessionStorage)||void 0===s?void 0:s.getItem(S.c9.ActivationInfo)))),!(null!==(t=u.queryObject)&&void 0!==t&&t.residentid)&&null!==(r=sessionStorage)&&void 0!==r&&r.getItem(S.c9.ResidentData)&&o((0,el.D)(JSON.parse(null===(a=sessionStorage)||void 0===a?void 0:a.getItem(S.c9.ResidentData)))),null!==(i=sessionStorage)&&void 0!==i&&i.getItem(S.c9.Account)){var e,n,t,r,i,s,a,l,c=JSON.parse(null===(l=sessionStorage)||void 0===l?void 0:l.getItem(S.c9.Account));o((0,W._6)(eu(eu({},c),{},{isSaveOnly:!0})))}},[]);var k=(0,l.d4)(x.qv).isFetching;return r=!C||k?(0,U.jsx)(j.A,{status:"progress",title:"Loading...",description:"Please wait..."}):null!=C&&C.proveMFAEnabled&&null!==A?(0,U.jsx)(es,{}):(0,U.jsx)(s.A,{}),(0,i.useEffect)(function(){o((0,d.rc)({query:u})),o((0,d.TX)({url:window.location.href})),h.$(m.pathname)},[]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(p(),{children:(0,U.jsx)("title",{children:"Create Your Account"})}),(0,U.jsx)(a.A,{}),r,(0,U.jsx)(ec.A,{})]})}},25446:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>s}),t(96540);var r=t(8056),o=t(81837),i=t(74848);let s=function(e){var n=e.sx,t=e.info;return(0,i.jsx)(o.A,{position:"end",sx:n,children:(0,i.jsx)("img",{src:void 0!==t&&t?r.To.InfoIcon:r.To.GreenCheckmarkIcon,alt:""})})}},94228:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(96540),o=t(71468),i=t(57500),s=t(19636);let a=function(e){var n=e.effortCode,t=e.planCode,a=e.groupingCode,l=void 0===a?"":a,c=(0,o.wA)(),d=(0,o.d4)(i.$0);return(0,r.useEffect)(function(){n&&t&&!d.details&&!d.isFetching&&c((0,s.U7)({effortCode:n,planCode:t,groupingCode:l}))},[n,t,l]),d}},92022:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(24151)}])}},e=>{var n=n=>e(e.s=n);e.O(0,[963,990,290,327,159,596,291,636,593,792],()=>n(92022)),_N_E=e.O()}]);
//# sourceMappingURL=index-12d16d14b4c7123e.js.map